<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Analyst Runner ‚Äî Simulative</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Onest:wght@400;600;700&display=swap');
    :root {
      --accent: #ff6a1a;
      --bg: #050509;
      --panel: #111119;
      --good: #00ff88;
      --bad: #ff3366;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Onest', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top, #151522 0, #050509 55%);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 16px;
    }
    .header {
      text-align: center;
      margin-bottom: 12px;
    }
    .header h1 {
      font-size: 2rem;
      background: linear-gradient(120deg, var(--accent), #ffb347);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .header p {
      font-size: 0.9rem;
      opacity: 0.85;
    }
    .hud {
      display: flex;
      gap: 12px;
      margin: 12px 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    .hud-item {
      background: rgba(17,17,25,0.9);
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 6px;
      border: 1px solid rgba(255,255,255,0.06);
    }
    .hud-item span.value {
      color: var(--accent);
      font-weight: 600;
    }

    .game-wrapper {
      background: linear-gradient(180deg, rgba(17,17,25,0.96), rgba(5,5,9,0.98));
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 18px 50px rgba(0,0,0,0.6);
      padding: 16px;
      max-width: 480px;
      width: 100%;
    }

    .lane-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.7rem;
      opacity: 0.75;
      margin-bottom: 4px;
      padding: 0 4px;
    }

    .game-area {
      position: relative;
      width: 100%;
      max-width: 448px;
      aspect-ratio: 16 / 9;
      margin: 0 auto;
      overflow: hidden;
      border-radius: 16px;
      background: radial-gradient(circle at bottom, #101020 0, #050509 60%);
    }

    .lane {
      position: absolute;
      left: 0;
      right: 0;
      height: 33.333%;
      border-top: 1px dashed rgba(255,255,255,0.08);
    }
    .lane:nth-child(1) { top: 0; }
    .lane:nth-child(2) { top: 33.333%; }
    .lane:nth-child(3) { top: 66.666%; border-bottom: 1px dashed rgba(255,255,255,0.08); }

    .hero {
      position: absolute;
      left: 8%;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #fff 0, var(--accent) 40%, #ff3b10 100%);
      box-shadow: 0 0 18px rgba(255,106,26,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transform: translateY(-50%);
      transition: top 0.18s ease-out;
    }
    .hero::after {
      content: '';
      position: absolute;
      width: 70%;
      height: 10%;
      bottom: -18px;
      left: 15%;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(0,0,0,0.7), transparent 70%);
      filter: blur(2px);
    }

    .object {
      position: absolute;
      right: -80px;
      width: 40px;
      min-height: 40px;
      padding: 6px;
      border-radius: 12px;
      font-size: 0.7rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.06);
      opacity: 0;
      transform: translateX(0);
    }
    .object.good {
      background: radial-gradient(circle at top, #0f2b1f, #04130b);
      color: #b2ffe1;
      box-shadow: 0 0 18px rgba(0,255,136,0.4);
    }
    .object.bad {
      background: radial-gradient(circle at top, #2b0f19, #16040b);
      color: #ffd2df;
      box-shadow: 0 0 18px rgba(255,51,102,0.5);
    }
    .object span.icon {
      font-size: 1rem;
      margin-bottom: 4px;
    }
    .object span.label {
      font-size: 0.6rem;
      line-height: 1.1;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 14px;
      font-size: 0.8rem;
      color: rgba(255,255,255,0.78);
    }
    .controls .keys {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }
    .pill {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      font-size: 0.7rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .pill kbd {
      background: rgba(0,0,0,0.5);
      border-radius: 4px;
      padding: 2px 6px;
      font-size: 0.65rem;
      border: 1px solid rgba(255,255,255,0.16);
    }

    .btn-primary {
      background: var(--accent);
      border: none;
      color: #fff;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 0 18px rgba(255,106,26,0.6);
      transition: transform 0.14s ease-out, box-shadow 0.14s ease-out;
      white-space: nowrap;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 26px rgba(255,106,26,0.8);
    }

    .overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(10,10,20,0.98), rgba(5,5,9,0.98));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 16px;
      z-index: 4;
    }
    .overlay.hidden { display: none; }

    .overlay h2 {
      font-size: 1.5rem;
      margin-bottom: 6px;
    }
    .overlay p {
      font-size: 0.9rem;
      opacity: 0.85;
      margin-bottom: 12px;
    }
    .badge-role {
      margin: 8px 0 14px;
      padding: 6px 16px;
      border-radius: 999px;
      background: rgba(0,255,136,0.1);
      border: 1px solid rgba(0,255,136,0.6);
      font-size: 0.8rem;
    }

    @media (max-width: 480px) {
      .game-wrapper { padding: 12px; }
      .header h1 { font-size: 1.6rem; }
      .game-area { border-radius: 14px; }
      .hud { gap: 8px; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Analyst Runner</h1>
    <p>–£—Å–ø–µ–π —Å–æ–±—Ä–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏–∑–±–µ–≥–∞–π –º—É—Å–æ—Ä–∞ –∑–∞ 30 —Å–µ–∫—É–Ω–¥.</p>
  </div>

  <div class="game-wrapper">
    <div class="hud">
      <div class="hud-item">‚è±Ô∏è –í—Ä–µ–º—è: <span class="value" id="time">30</span> c</div>
      <div class="hud-item">‚≠ê –û—á–∫–∏: <span class="value" id="score">0</span></div>
      <div class="hud-item">‚úÖ –ß–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ: <span class="value" id="clean">0</span></div>
    </div>

    <div class="lane-labels">
      <span>SQL / –û–±—Ä–∞–±–æ—Ç–∫–∞</span>
      <span>BI / –î–∞—à–±–æ—Ä–¥</span>
      <span>–ü—Ä–æ–¥—É–∫—Ç / –ú–µ—Ç—Ä–∏–∫–∏</span>
    </div>

    <div class="game-area" id="gameArea">
      <div class="lane"></div>
      <div class="lane"></div>
      <div class="lane"></div>

      <div class="hero" id="hero">üìà</div>

      <!-- –°—Ç–∞—Ä—Ç / —Ñ–∏–Ω–∏—à -->
      <div class="overlay" id="overlay">
        <h2>–°—Ç–∞–Ω–µ—à—å middle‚Äë–∞–Ω–∞–ª–∏—Ç–∏–∫–æ–º?</h2>
        <p>–ü–µ—Ä–µ–∫–ª—é—á–∞–π—Å—è –º–µ–∂–¥—É –ª–∏–Ω–∏—è–º–∏ –∏ —Å–æ–±–∏—Ä–∞–π —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.</p>
        <div class="pill">
          <span>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</span>
          <span><kbd>W</kbd>/<kbd>‚Üë</kbd> –≤–≤–µ—Ä—Ö ¬∑ <kbd>S</kbd>/<kbd>‚Üì</kbd> –≤–Ω–∏–∑</span>
        </div>
        <button class="btn-primary" id="startBtn">–°—Ç–∞—Ä—Ç</button>
      </div>
    </div>

    <div class="controls">
      <div class="keys">
        <div class="pill">
          <span>–•–æ—Ä–æ—à–µ–µ:</span> <span style="color:var(--good)">SQL ¬∑ —Ç–∞–±–ª–∏—Ü—ã ¬∑ –¥–∞—à–±–æ—Ä–¥—ã</span>
        </div>
        <div class="pill">
          <span>–ú—É—Å–æ—Ä:</span> <span style="color:var(--bad)">HiPPO ¬∑ vanity metrics</span>
        </div>
      </div>
      <button class="btn-primary" id="restartBtn" style="display:none;">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>
  </div>

  <script>
    const hero = document.getElementById('hero');
    const gameArea = document.getElementById('gameArea');
    const overlay = document.getElementById('overlay');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');

    const timeEl = document.getElementById('time');
    const scoreEl = document.getElementById('score');
    const cleanEl = document.getElementById('clean');

    const lanesY = [16.7, 50, 83.3]; // –ø—Ä–æ—Ü–µ–Ω—Ç—ã –ø–æ –≤—ã—Å–æ—Ç–µ
    let currentLane = 1;
    let gameRunning = false;
    let timer = 30;
    let timerInterval;
    let spawnInterval;
    let score = 0;
    let cleanCount = 0;
    let objects = [];

    const goodObjects = [
      { icon: 'üßπ', label: '–û—á–∏—Å—Ç–∫–∞' },
      { icon: 'üßÆ', label: 'SQL' },
      { icon: 'üìä', label: 'DAU' },
      { icon: 'üìà', label: '–§–∞–Ω–µ–ª' },
      { icon: 'üìâ', label: '–°–µ–≥–º–µ–Ω—Ç—ã' }
    ];

    const badObjects = [
      { icon: 'ü¶õ', label: 'HiPPO' },
      { icon: '‚ú®', label: 'Vanity' },
      { icon: 'üé≤', label: '–†–∞–Ω–¥–æ–º' },
      { icon: 'üß±', label: '–°–∏–ª–æ—Å—ã' }
    ];

    function setLane(laneIndex) {
      currentLane = Math.max(0, Math.min(2, laneIndex));
      hero.style.top = lanesY[currentLane] + '%';
    }

    function resetGame() {
      score = 0;
      cleanCount = 0;
      timer = 30;
      scoreEl.textContent = score;
      cleanEl.textContent = cleanCount;
      timeEl.textContent = timer;
      objects.forEach(o => o.el.remove());
      objects = [];
      setLane(1);
    }

    function startGame() {
      resetGame();
      overlay.classList.add('hidden');
      restartBtn.style.display = 'none';
      gameRunning = true;

      timerInterval = setInterval(() => {
        timer--;
        timeEl.textContent = timer;
        if (timer <= 0) {
          endGame();
        }
      }, 1000);

      spawnInterval = setInterval(() => {
        spawnObject();
      }, 700);

      requestAnimationFrame(updateObjects);
    }

    function endGame() {
      gameRunning = false;
      clearInterval(timerInterval);
      clearInterval(spawnInterval);

      // –æ—Ü–µ–Ω–∫–∞ —Ä–æ–ª–∏
      let role = '–ù–æ–≤–∏—á–æ–∫';
      let subtitle = '–¢—ã —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—à—å –ø—É—Ç—å –≤ –¥–∞–Ω–Ω—ã—Ö ‚Äî —Å–∞–º–æ–µ –≤—Ä–µ–º—è –¥–ª—è Simulative.';

      if (score >= 400 && score < 800) {
        role = 'Strong junior';
        subtitle = '–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å —á—É—Ç—å‚Äë—á—É—Ç—å –æ–ø—ã—Ç–∞. –ü—Ä–æ–∫–∞—á–∞–π—Å—è –¥–æ middle –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–µ Simulative.';
      } else if (score >= 800) {
        role = 'Middle analyst';
        subtitle = '–ö—Ä–∞—Å–∏–≤–æ! –¢–∞–∫–æ–π —Ç–µ–º–ø –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö. –ó–∞–±–∏—Ä–∞–π –ø—Ä–æ–º–æ –∏ –ø—Ä–∏—Ö–æ–¥–∏ –≤ Simulative.';
      }

      overlay.classList.remove('hidden');
      overlay.innerHTML = `
        <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –æ—á–∫–æ–≤</h2>
        <div class="badge-role">${role}</div>
        <p>${subtitle}</p>
        <p style="margin-bottom:10px;font-size:0.85rem;opacity:0.9;">
          –ß–∏—Å—Ç—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: <strong>${cleanCount}</strong> ¬∑ –ú—É—Å–æ—Ä –æ–±—Ö–æ–¥–∏–ª —Å—Ç–æ—Ä–æ–Ω–æ–π? –ü—Ä–æ–≤–µ—Ä—å –µ—â—ë —Ä–∞–∑–æ–∫.
        </p>
        <div class="pill" style="margin-bottom:10px;">
          –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ: <strong style="margin-left:6px;">SIMULATIVE‚ÄëRUNNER</strong>
        </div>
        <button class="btn-primary" id="playAgain">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
      `;
      document.getElementById('playAgain').onclick = () => {
        overlay.innerHTML = `
          <h2>–°—Ç–∞–Ω–µ—à—å middle‚Äë–∞–Ω–∞–ª–∏—Ç–∏–∫–æ–º?</h2>
          <p>–ü–µ—Ä–µ–∫–ª—é—á–∞–π—Å—è –º–µ–∂–¥—É –ª–∏–Ω–∏—è–º–∏ –∏ —Å–æ–±–∏—Ä–∞–π —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.</p>
          <div class="pill">
            <span>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</span>
            <span><kbd>W</kbd>/<kbd>‚Üë</kbd> –≤–≤–µ—Ä—Ö ¬∑ <kbd>S</kbd>/<kbd>‚Üì</kbd> –≤–Ω–∏–∑</span>
          </div>
          <button class="btn-primary" id="startBtn">–°—Ç–∞—Ä—Ç</button>
        `;
        document.getElementById('startBtn').onclick = startGame;
      };
      restartBtn.style.display = 'inline-flex';
    }

    function spawnObject() {
      if (!gameRunning) return;

      const laneIndex = Math.floor(Math.random() * 3);
      const isGood = Math.random() < 0.65;
      const data = isGood
        ? goodObjects[Math.floor(Math.random() * goodObjects.length)]
        : badObjects[Math.floor(Math.random() * badObjects.length)];

      const el = document.createElement('div');
      el.className = 'object ' + (isGood ? 'good' : 'bad');
      el.style.top = lanesY[laneIndex] + '%';
      el.style.transform = 'translateY(-50%)';
      el.innerHTML = `<span class="icon">${data.icon}</span><span class="label">${data.label}</span>`;
      gameArea.appendChild(el);

      const obj = {
        lane: laneIndex,
        isGood,
        x: gameArea.clientWidth + 40,
        speed: 3 + Math.random() * 2,
        el,
        hit: false
      };
      objects.push(obj);

      setTimeout(() => {
        el.style.opacity = 1;
      }, 10);
    }

    function updateObjects() {
      if (!gameRunning) return;

      const heroRect = hero.getBoundingClientRect();
      const gameRect = gameArea.getBoundingClientRect();

      objects.forEach(obj => {
        obj.x -= obj.speed;
        obj.el.style.right = (gameRect.right - (gameRect.left + obj.x)) + 'px';

        // —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ
        if (!obj.hit && obj.lane === currentLane) {
          const objRect = obj.el.getBoundingClientRect();
          const dx = (objRect.left + objRect.width / 2) - (heroRect.left + heroRect.width / 2);
          const dy = (objRect.top + objRect.height / 2) - (heroRect.top + heroRect.height / 2);
          const distance = Math.sqrt(dx * dx + dy * dy);

          if (distance < 40) {
            obj.hit = true;
            if (obj.isGood) {
              score += 80;
              cleanCount++;
              hero.style.boxShadow = '0 0 26px rgba(0,255,136,0.9)';
              setTimeout(() => {
                hero.style.boxShadow = '0 0 18px rgba(255,106,26,0.9)';
              }, 150);
            } else {
              score = Math.max(0, score - 100);
              hero.style.boxShadow = '0 0 30px rgba(255,51,102,0.9)';
              setTimeout(() => {
                hero.style.boxShadow = '0 0 18px rgba(255,106,26,0.9)';
              }, 200);
            }
            scoreEl.textContent = score;
            cleanEl.textContent = cleanCount;
            obj.el.style.opacity = 0;
          }
        }
      });

      // —É–¥–∞–ª–µ–Ω–∏–µ —É—à–µ–¥—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
      objects = objects.filter(obj => {
        if (obj.x < -60) {
          obj.el.remove();
          return false;
        }
        return true;
      });

      requestAnimationFrame(updateObjects);
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    window.addEventListener('keydown', e => {
      if (!gameRunning) return;
      if (e.key === 'w' || e.key === 'W' || e.key === 'ArrowUp') {
        setLane(currentLane - 1);
      }
      if (e.key === 's' || e.key === 'S' || e.key === 'ArrowDown') {
        setLane(currentLane + 1);
      }
    });

    startBtn.onclick = startGame;
    restartBtn.onclick = () => {
      overlay.classList.add('hidden');
      startGame();
    };

    // –Ω–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
    setLane(currentLane);
  </script>
</body>
</html>
